## 版本控制工具-GIT

### 1、git简介

​	git是分布式版本管理工具，与集中式版本管理工具svn不同。

​	*而要理解两种版本管理工具的区别，我们需要先辨析**集中式**和**分布式**这两个概念。**集中式**和**分布式**是两种不同的系统架构设计方式，他们主要在资源管理、数据存储、可靠性、扩展性等方面存在显著区别。总的来说集中式存在一个中心节点，该中心节点对资源和数据进行集中式的管理和存储。而分布式的架构则是选择将**资源**分散在不同的节点，每个节点都有一定的资源管理能力。而对于**数据存储**来说，将数据分散在多个节点上，通过**数据分片、副本**等方式提高存储效率和可靠性。*

​	*两种不同的系统架构设计方式并无绝对的优劣之分，**存在即合理**，虽然看上去好像分布式会比集中式具有更大的优势，现在我们推崇的也大多是分布式的管理策略，但是既然集中式仍然存在，那就说明集中式仍具有自己在某些情况下的优势。牢记一切事物都有其正面效果，不能只是片面地看待。*

​	在了解了两个概念之后，我们应该对这两种工具有了最基本的一些认识。简单来说，集中式的版本管理工具将所有代码和版本信息都存储在中央服务器上，开发者需要通过网络连接到服务器进行代码的检出和提交等操作。

​	而对于分布式的版本管理工具来说，每个开发者都拥有自己的仓库副本，可以在本地就就进行提交、分支管理等操作，无需连接到中央服务器，即每个开发者都是整个系统的一个节点。

### 2、git & github

​	大家对这两个名词应该很熟悉，其实在刚接触仓库这个概念的时候，我以为这两者就是一个东西。但事实上，这两者其实是截然不同的两个概念，但存在紧密的联系。

​	首先，在分布式版本管理系统中有两个很重要的概念，**本地仓库**和**远程仓库**，本地仓库是属于每一个开发者自己的一个小型仓库，使用git工具，可以为自己的项目初始化本地仓库；而远程仓库通常可以理解为一个拥有大型仓库的服务器，市面上常见的即Github等。

### 3、初步认识git

1. Git的三个区域
   - **工作区**：处理工作的区域，即在你电脑中看到的目录
   - **暂存区**：临时存放的区域，在.git文件夹内的index中
   - **本地git仓库（版本库）**：最终的存放区域，指的是整个.git文件夹（即是本地仓库）

​	这三个区域属于分布式节点中的存储空间，即可以理解为本机电脑中的内容。我们在本机电脑上部署属于我们项目的文件，即在工作区处理我们的文件，可以使用`git add`指令将属于工作区的文件转入.git文件夹内（即进入暂存区）。但是顾名思义，暂存区只是暂时存储的作用，我们可以使用`git commit -m '注释'`指令从暂存区转入版本库，实现我们对于项目的版本控制，防止关键信息丢失。流程如下图所示：

![image-20250227194619893](C:\Users\DZQ\AppData\Roaming\Typora\typora-user-images\image-20250227194619893.png)

2. Git的配置

   ​	因为分布式系统的原理，我们需要标识每个Git，因此要想使用Git第一步需要在本地配置专属于你的用户名和邮件地址。配置指令如下：

   - `git config --global user.name '用户名'`
   - `git config --global user.email '邮箱'`

   *Tip:--global指令表示全局配置，即一次配置整机使用，以后在使用git都生效。*

​		在配置成功后可以使用指令`git config --list`检查配置是否成功。

3. 文件右侧标记

​	如果使用Vscode打开一个包含git仓库的文件夹时，文件右侧会出现表示，以下是每个标识的含义：

- M：已修改（Modified）-文件已被修改但是还没有被添加到暂存区
- A：已添加（Added）-文件已被添加到暂存区，但是还没有被提交
- D：已删除（Deleted）-文件已经被删除，并且已被标记为已删除，但是还没有被提交
- R：已重命名（Renamed）
- C：已复制（Copied）
- U：已更新但未融合

4. Git的基础命令

   - 初始化空的Git仓库：`git init`，产生.git文件夹

   - 记录更新到Git仓库：每当完成一个阶段的目标，想要记录下它时，就将它提交到仓库

     ​	**核心操作**：`工作区开发`->`将修改过的文件添加到暂存区`->`将暂存区的文件记录到版本库`

     ​	**指令**：`git add`将工作区的文件加入暂存区，`git commit -m '提交内容说明'`指令将暂存区内容提交到版本库

     - Git日志 及状态查看：`git log （--oneline）`--oneline为了简化显示信息
     - Git版本回退：git reset --hard 版本号
     - 查看版本号：git log --oneline
     - 查看所有操作：git reflog
     - bash清屏：clear
     - bash另起一页：Ctrl+L

5. Git分支

   分支本质：分支其实就是一个叫HEAD的指针标记，每次代码提交，此HEAD指针都会往后移动一次，保证指向的（并且工作区里的）都是最后一次提交。例如当执行`git reset --hard a3bcab2`，HEAD指针会移动。而HEAD指针的移动会影响工作区中的代码。

   分支作用：分治思想，不同部分开发之间不互相影响。

   基本指令：

   - 创建分支：git branch 分支名
   - 查看所有分支：git branch
   - 切换分支：git checkout 分支名
   - 分支合并：git merge 目标分支名，将目标分支名下的所有记录合并到当前分支下
   - 分支删除：git branch -d 分支名；-D强制删除

   总结：就我理解来说，每个分支相当于一个新的暂存区，不同人在开发同一个项目时，可能只想保留自己修改的过程，就可以新建一个分支，来单独记录自己的修改。也可以将每个分支理解成单独的一个指针，指向不同的版本流向，使用merge指令就可以将记录同步过来。

### 4、本地仓库与远程仓库的连接与上传

最常见的应该是上传自己的文件至github。常见的有两种传输协议：

- HTTPS协议：需要用户名和密码：`https://github.com/(userName)/(repositoryName).gitssh`
  - SSH协议：需要配置密钥，免密登录`git@github.com:userName/repositoryName.git`

SSH配置步骤如下：

- 对远程仓库的配置
  1. 注册账户
  
  2. 新建仓库（填写仓库名，以及简单仓库描述）
  
  3. 生成SSH配置
     - `git config --global user.name "注册名"`
     - `git config --global user.email "注册邮箱"`
     - `ssh-keygen -t rsa -C "自己的邮箱"`
     - 生成的SSH文件在C盘USER/用户/.ssh下，id-rsa为私钥，id_rsa.pub为公钥。
  
  4. github配置SSH
  
     主页setting下new一个SSH密钥，就能连接上了。
  
  5. 建立本地仓库与远程仓库的连接
  
     ```
     # 给远程仓库设置一个别名  
     git remote add 仓库别名 仓库地址  
     git remote add origin git@gitee.com:(username)/repository.git  
       
     # 删除 origin 这个别名  
     git remote remove origin  
       
     # 使用 -u 记录 push 到远端分支的默认值，将来直接 git push 即可  
     git push -u 仓库别名 分支名  首次
     ```
  
  6. 克隆拉取项目：git clone url
  
  总结远程仓库流程：
  
  ![img](https://i-blog.csdnimg.cn/blog_migrate/d5cc5eef8446a1590914635cbd351b10.jpeg)

![img](https://i-blog.csdnimg.cn/blog_migrate/1ecacd99ed65a04534db34803906f372.jpeg)

![img](https://i-blog.csdnimg.cn/blog_migrate/3d98a58141752a9dd1fdeb8280906f05.jpeg)

![img](https://i-blog.csdnimg.cn/blog_migrate/b2ffcd0b90e160ae114e10ab877fc69f.jpeg)

### 5、Git常用命令总览

![img](https://i-blog.csdnimg.cn/blog_migrate/8934d539be405ce0124631f9db85f721.jpeg)

# 通用链表的使用

## 1. 问题提出

​	在对链表的操作中，经常会遇到节点除了数据元素的类型之外，其他都相同的情况，这时候尽管结构大体相似，但是仍然需要对链表结构进行重构，并且改变所有有关的函数，操作很麻烦且不方便。为了解决这个问题，pintos操作系统提出了**通用链表**的概念。

## 2.基本实现思路

​	与节点的定义不同，我们更倾向于称呼通用链表中的连接元素为成员元素（struct_elem)，因为事实上，起到连接作用的仅是链表中的一个**成员**，该成员是一个结构指针，使用它来对整个列表进行连接。

​	基本定义：

```c
struct struct_elem {
    struct struct_elem *pre;
    struct struct_elem *next;
};
```

​	实现方法：

​	每个列表节点仍旧含有不同的元素，可以类型不同，但是在链表中的节点有一个共同的成员就是struct struct_elem这个结构，包含指向这个节点的上一个和下一个节点的成员的指针。

​	经过若干次添加操作，大致会形成如下的结构：

![image-20241102195451715](D:\DZQ\课程学习\图片\image-20241102195451715.png)

## 3. 通用链表的基本操作

​	Pintos操作系统在list.h中定义了有关通用链表的一些定义，包含以下一个函数：

- list_init()：对通用链表进行初始化，生成"头节点"和"尾节点"。生成如下图所示结果：

![image-20241102201008397](D:\DZQ\课程学习\图片\image-20241102201008397.png)

- list_insert(before,&node.elem)：在表头和表尾之间插
- list_remove()：只能删除内节点（内节点指的是表头和表尾之间的元素）